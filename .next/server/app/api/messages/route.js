/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/messages/route";
exports.ids = ["app/api/messages/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_nilsl_Documents_Nils_projects_gauntlet_slack_clone_v0_app_api_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/messages/route.ts */ \"(rsc)/./app/api/messages/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/messages/route\",\n        pathname: \"/api/messages\",\n        filename: \"route\",\n        bundlePath: \"app/api/messages/route\"\n    },\n    resolvedPagePath: \"/Users/nilsl/Documents/Nils/projects/gauntlet/slack-clone-v0/app/api/messages/route.ts\",\n    nextConfigOutput,\n    userland: _Users_nilsl_Documents_Nils_projects_gauntlet_slack_clone_v0_app_api_messages_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZtZXNzYWdlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbWVzc2FnZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZtZXNzYWdlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm5pbHNsJTJGRG9jdW1lbnRzJTJGTmlscyUyRnByb2plY3RzJTJGZ2F1bnRsZXQlMkZzbGFjay1jbG9uZS12MCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZuaWxzbCUyRkRvY3VtZW50cyUyRk5pbHMlMkZwcm9qZWN0cyUyRmdhdW50bGV0JTJGc2xhY2stY2xvbmUtdjAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbmlsc2wvRG9jdW1lbnRzL05pbHMvcHJvamVjdHMvZ2F1bnRsZXQvc2xhY2stY2xvbmUtdjAvYXBwL2FwaS9tZXNzYWdlcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbWVzc2FnZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tZXNzYWdlc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVzc2FnZXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbmlsc2wvRG9jdW1lbnRzL05pbHMvcHJvamVjdHMvZ2F1bnRsZXQvc2xhY2stY2xvbmUtdjAvYXBwL2FwaS9tZXNzYWdlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/messages/route.ts":
/*!***********************************!*\
  !*** ./app/api/messages/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n// Get or create default user\nasync function getOrCreateUser() {\n    const defaultUser = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findFirst();\n    if (defaultUser) return defaultUser;\n    // Create a default user if none exists\n    return _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: 'user_1',\n            name: 'Default User',\n            avatar: '👤',\n            isOnline: true,\n            createdAt: new Date(),\n            updatedAt: new Date()\n        }\n    });\n}\nasync function POST(req) {\n    try {\n        console.log('Received message request');\n        const body = await req.json();\n        console.log('Request body:', JSON.stringify(body, null, 2));\n        const { content, channelId, parentMessageId, attachments } = body;\n        const now = new Date();\n        // Get or create user first\n        console.log('Getting or creating user');\n        const user = await getOrCreateUser();\n        console.log('Using user:', JSON.stringify(user, null, 2));\n        // Validate input\n        if (!content || typeof content !== 'string') {\n            console.error('Invalid content:', content);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: 'Invalid content',\n                details: 'Content must be a non-empty string'\n            }), {\n                status: 400,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n        }\n        if (!channelId || typeof channelId !== 'string') {\n            console.error('Invalid channelId:', channelId);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: 'Invalid channelId',\n                details: 'Channel ID must be a non-empty string'\n            }), {\n                status: 400,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n        }\n        console.log('Validating channel:', channelId);\n        // Validate channel exists\n        const channel = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.channel.findUnique({\n            where: {\n                id: channelId\n            }\n        });\n        if (!channel) {\n            console.error('Channel not found:', channelId);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: 'Channel not found',\n                details: `No channel found with ID: ${channelId}`\n            }), {\n                status: 404,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n        }\n        // Validate parent message if provided\n        if (parentMessageId) {\n            console.log('Validating parent message:', parentMessageId);\n            const parentMessage = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.message.findUnique({\n                where: {\n                    id: parentMessageId\n                }\n            });\n            if (!parentMessage) {\n                console.error('Parent message not found:', parentMessageId);\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                    error: 'Parent message not found',\n                    details: `No message found with ID: ${parentMessageId}`\n                }), {\n                    status: 404,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            }\n            // Ensure the reply is in the same channel as the parent message\n            if (parentMessage.channelId !== channelId) {\n                console.error('Channel mismatch:', {\n                    parentChannelId: parentMessage.channelId,\n                    replyChannelId: channelId\n                });\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                    error: 'Invalid channel',\n                    details: 'Reply must be in the same channel as the parent message'\n                }), {\n                    status: 400,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            }\n        }\n        console.log('Creating message');\n        try {\n            // Generate a unique message ID\n            const messageId = `msg_${Date.now()}_${Math.random().toString(36).slice(2)}`;\n            console.log('Generated message ID:', messageId);\n            // Create the message\n            const message = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.message.create({\n                data: {\n                    id: messageId,\n                    content,\n                    channelId,\n                    parentMessageId: parentMessageId || null,\n                    senderId: user.id,\n                    createdAt: now,\n                    updatedAt: now\n                }\n            });\n            console.log('Message created:', JSON.stringify(message, null, 2));\n            // Create attachments if any\n            if (attachments && attachments.length > 0) {\n                console.log('Creating attachments:', attachments.length);\n                await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.attachment.createMany({\n                    data: attachments.map((attachment)=>({\n                            id: `att_${Date.now()}_${Math.random().toString(36).slice(2)}`,\n                            messageId: message.id,\n                            filename: attachment.filename,\n                            fileUrl: attachment.fileUrl,\n                            contentType: attachment.contentType,\n                            createdAt: now\n                        }))\n                });\n                console.log('Attachments created');\n            }\n            console.log('Fetching message with attachments');\n            // Return the created message with its attachments and parent message info\n            const messageWithAttachments = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.message.findUnique({\n                where: {\n                    id: message.id\n                },\n                include: {\n                    attachments: true,\n                    sender: true,\n                    channel: true\n                }\n            });\n            if (!messageWithAttachments) {\n                throw new Error(`Failed to fetch created message with ID: ${message.id}`);\n            }\n            console.log('Returning message:', JSON.stringify(messageWithAttachments, null, 2));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(messageWithAttachments);\n        } catch (dbError) {\n            console.error('Database error:', dbError);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: 'Database error',\n                details: dbError instanceof Error ? dbError.message : 'Unknown database error',\n                stack: dbError instanceof Error ? dbError.stack : undefined\n            }), {\n                status: 500,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n        }\n    } catch (error) {\n        // Log the full error details\n        console.error('Failed to create message. Full error:', {\n            error,\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined\n        });\n        // Return a more detailed error message\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            error: 'Failed to create message',\n            details: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined\n        }), {\n            status: 500,\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL21lc3NhZ2VzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUNUO0FBUWpDLDZCQUE2QjtBQUM3QixlQUFlRTtJQUNiLE1BQU1DLGNBQWMsTUFBTUYsMkNBQU1BLENBQUNHLElBQUksQ0FBQ0MsU0FBUztJQUMvQyxJQUFJRixhQUFhLE9BQU9BO0lBRXhCLHVDQUF1QztJQUN2QyxPQUFPRiwyQ0FBTUEsQ0FBQ0csSUFBSSxDQUFDRSxNQUFNLENBQUM7UUFDeEJDLE1BQU07WUFDSkMsSUFBSTtZQUNKQyxNQUFNO1lBQ05DLFFBQVE7WUFDUkMsVUFBVTtZQUNWQyxXQUFXLElBQUlDO1lBQ2ZDLFdBQVcsSUFBSUQ7UUFDakI7SUFDRjtBQUNGO0FBRU8sZUFBZUUsS0FBS0MsR0FBWTtJQUNyQyxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1DLE9BQU8sTUFBTUgsSUFBSUksSUFBSTtRQUMzQkgsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQkcsS0FBS0MsU0FBUyxDQUFDSCxNQUFNLE1BQU07UUFDeEQsTUFBTSxFQUFFSSxPQUFPLEVBQUVDLFNBQVMsRUFBRUMsZUFBZSxFQUFFQyxXQUFXLEVBQUUsR0FBR1A7UUFDN0QsTUFBTVEsTUFBTSxJQUFJZDtRQUVoQiwyQkFBMkI7UUFDM0JJLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU1kLE9BQU8sTUFBTUY7UUFDbkJlLFFBQVFDLEdBQUcsQ0FBQyxlQUFlRyxLQUFLQyxTQUFTLENBQUNsQixNQUFNLE1BQU07UUFFdEQsaUJBQWlCO1FBQ2pCLElBQUksQ0FBQ21CLFdBQVcsT0FBT0EsWUFBWSxVQUFVO1lBQzNDTixRQUFRVyxLQUFLLENBQUMsb0JBQW9CTDtZQUNsQyxPQUFPLElBQUl2QixxREFBWUEsQ0FDckJxQixLQUFLQyxTQUFTLENBQUM7Z0JBQUVNLE9BQU87Z0JBQW1CQyxTQUFTO1lBQXFDLElBQ3pGO2dCQUFFQyxRQUFRO2dCQUFLQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFBRTtRQUVuRTtRQUVBLElBQUksQ0FBQ1AsYUFBYSxPQUFPQSxjQUFjLFVBQVU7WUFDL0NQLFFBQVFXLEtBQUssQ0FBQyxzQkFBc0JKO1lBQ3BDLE9BQU8sSUFBSXhCLHFEQUFZQSxDQUNyQnFCLEtBQUtDLFNBQVMsQ0FBQztnQkFBRU0sT0FBTztnQkFBcUJDLFNBQVM7WUFBd0MsSUFDOUY7Z0JBQUVDLFFBQVE7Z0JBQUtDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtZQUFFO1FBRW5FO1FBRUFkLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJNO1FBQ25DLDBCQUEwQjtRQUMxQixNQUFNUSxVQUFVLE1BQU0vQiwyQ0FBTUEsQ0FBQytCLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDO1lBQzlDQyxPQUFPO2dCQUFFMUIsSUFBSWdCO1lBQVU7UUFDekI7UUFFQSxJQUFJLENBQUNRLFNBQVM7WUFDWmYsUUFBUVcsS0FBSyxDQUFDLHNCQUFzQko7WUFDcEMsT0FBTyxJQUFJeEIscURBQVlBLENBQ3JCcUIsS0FBS0MsU0FBUyxDQUFDO2dCQUFFTSxPQUFPO2dCQUFxQkMsU0FBUyxDQUFDLDBCQUEwQixFQUFFTCxXQUFXO1lBQUMsSUFDL0Y7Z0JBQUVNLFFBQVE7Z0JBQUtDLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtZQUFFO1FBRW5FO1FBRUEsc0NBQXNDO1FBQ3RDLElBQUlOLGlCQUFpQjtZQUNuQlIsUUFBUUMsR0FBRyxDQUFDLDhCQUE4Qk87WUFDMUMsTUFBTVUsZ0JBQWdCLE1BQU1sQywyQ0FBTUEsQ0FBQ21DLE9BQU8sQ0FBQ0gsVUFBVSxDQUFDO2dCQUNwREMsT0FBTztvQkFBRTFCLElBQUlpQjtnQkFBZ0I7WUFDL0I7WUFFQSxJQUFJLENBQUNVLGVBQWU7Z0JBQ2xCbEIsUUFBUVcsS0FBSyxDQUFDLDZCQUE2Qkg7Z0JBQzNDLE9BQU8sSUFBSXpCLHFEQUFZQSxDQUNyQnFCLEtBQUtDLFNBQVMsQ0FBQztvQkFBRU0sT0FBTztvQkFBNEJDLFNBQVMsQ0FBQywwQkFBMEIsRUFBRUosaUJBQWlCO2dCQUFDLElBQzVHO29CQUFFSyxRQUFRO29CQUFLQyxTQUFTO3dCQUFFLGdCQUFnQjtvQkFBbUI7Z0JBQUU7WUFFbkU7WUFFQSxnRUFBZ0U7WUFDaEUsSUFBSUksY0FBY1gsU0FBUyxLQUFLQSxXQUFXO2dCQUN6Q1AsUUFBUVcsS0FBSyxDQUFDLHFCQUFxQjtvQkFBRVMsaUJBQWlCRixjQUFjWCxTQUFTO29CQUFFYyxnQkFBZ0JkO2dCQUFVO2dCQUN6RyxPQUFPLElBQUl4QixxREFBWUEsQ0FDckJxQixLQUFLQyxTQUFTLENBQUM7b0JBQ2JNLE9BQU87b0JBQ1BDLFNBQVM7Z0JBQ1gsSUFDQTtvQkFBRUMsUUFBUTtvQkFBS0MsU0FBUzt3QkFBRSxnQkFBZ0I7b0JBQW1CO2dCQUFFO1lBRW5FO1FBQ0Y7UUFFQWQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osSUFBSTtZQUNGLCtCQUErQjtZQUMvQixNQUFNcUIsWUFBWSxDQUFDLElBQUksRUFBRTFCLEtBQUtjLEdBQUcsR0FBRyxDQUFDLEVBQUVhLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLEtBQUssQ0FBQyxJQUFJO1lBQzVFMUIsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QnFCO1lBRXJDLHFCQUFxQjtZQUNyQixNQUFNSCxVQUFVLE1BQU1uQywyQ0FBTUEsQ0FBQ21DLE9BQU8sQ0FBQzlCLE1BQU0sQ0FBQztnQkFDMUNDLE1BQU07b0JBQ0pDLElBQUkrQjtvQkFDSmhCO29CQUNBQztvQkFDQUMsaUJBQWlCQSxtQkFBbUI7b0JBQ3BDbUIsVUFBVXhDLEtBQUtJLEVBQUU7b0JBQ2pCSSxXQUFXZTtvQkFDWGIsV0FBV2E7Z0JBQ2I7WUFDRjtZQUNBVixRQUFRQyxHQUFHLENBQUMsb0JBQW9CRyxLQUFLQyxTQUFTLENBQUNjLFNBQVMsTUFBTTtZQUU5RCw0QkFBNEI7WUFDNUIsSUFBSVYsZUFBZUEsWUFBWW1CLE1BQU0sR0FBRyxHQUFHO2dCQUN6QzVCLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJRLFlBQVltQixNQUFNO2dCQUN2RCxNQUFNNUMsMkNBQU1BLENBQUM2QyxVQUFVLENBQUNDLFVBQVUsQ0FBQztvQkFDakN4QyxNQUFNbUIsWUFBWXNCLEdBQUcsQ0FBQyxDQUFDRixhQUFpQzs0QkFDdER0QyxJQUFJLENBQUMsSUFBSSxFQUFFSyxLQUFLYyxHQUFHLEdBQUcsQ0FBQyxFQUFFYSxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxLQUFLLENBQUMsSUFBSTs0QkFDOURKLFdBQVdILFFBQVE1QixFQUFFOzRCQUNyQnlDLFVBQVVILFdBQVdHLFFBQVE7NEJBQzdCQyxTQUFTSixXQUFXSSxPQUFPOzRCQUMzQkMsYUFBYUwsV0FBV0ssV0FBVzs0QkFDbkN2QyxXQUFXZTt3QkFDYjtnQkFDRjtnQkFDQVYsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7WUFFQUQsUUFBUUMsR0FBRyxDQUFDO1lBQ1osMEVBQTBFO1lBQzFFLE1BQU1rQyx5QkFBeUIsTUFBTW5ELDJDQUFNQSxDQUFDbUMsT0FBTyxDQUFDSCxVQUFVLENBQUM7Z0JBQzdEQyxPQUFPO29CQUFFMUIsSUFBSTRCLFFBQVE1QixFQUFFO2dCQUFDO2dCQUN4QjZDLFNBQVM7b0JBQ1AzQixhQUFhO29CQUNiNEIsUUFBUTtvQkFDUnRCLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLElBQUksQ0FBQ29CLHdCQUF3QjtnQkFDM0IsTUFBTSxJQUFJRyxNQUFNLENBQUMseUNBQXlDLEVBQUVuQixRQUFRNUIsRUFBRSxFQUFFO1lBQzFFO1lBRUFTLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JHLEtBQUtDLFNBQVMsQ0FBQzhCLHdCQUF3QixNQUFNO1lBQy9FLE9BQU9wRCxxREFBWUEsQ0FBQ29CLElBQUksQ0FBQ2dDO1FBQzNCLEVBQUUsT0FBT0ksU0FBUztZQUNoQnZDLFFBQVFXLEtBQUssQ0FBQyxtQkFBbUI0QjtZQUNqQyxPQUFPLElBQUl4RCxxREFBWUEsQ0FDckJxQixLQUFLQyxTQUFTLENBQUM7Z0JBQ2JNLE9BQU87Z0JBQ1BDLFNBQVMyQixtQkFBbUJELFFBQVFDLFFBQVFwQixPQUFPLEdBQUc7Z0JBQ3REcUIsT0FBT0QsbUJBQW1CRCxRQUFRQyxRQUFRQyxLQUFLLEdBQUdDO1lBQ3BELElBQ0E7Z0JBQUU1QixRQUFRO2dCQUFLQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFBRTtRQUVuRTtJQUNGLEVBQUUsT0FBT0gsT0FBTztRQUNkLDZCQUE2QjtRQUM3QlgsUUFBUVcsS0FBSyxDQUFDLHlDQUF5QztZQUNyREE7WUFDQVEsU0FBU1IsaUJBQWlCMkIsUUFBUTNCLE1BQU1RLE9BQU8sR0FBRztZQUNsRHFCLE9BQU83QixpQkFBaUIyQixRQUFRM0IsTUFBTTZCLEtBQUssR0FBR0M7UUFDaEQ7UUFFQSx1Q0FBdUM7UUFDdkMsT0FBTyxJQUFJMUQscURBQVlBLENBQ3JCcUIsS0FBS0MsU0FBUyxDQUFDO1lBQ2JNLE9BQU87WUFDUEMsU0FBU0QsaUJBQWlCMkIsUUFBUTNCLE1BQU1RLE9BQU8sR0FBRztZQUNsRHFCLE9BQU83QixpQkFBaUIyQixRQUFRM0IsTUFBTTZCLEtBQUssR0FBR0M7UUFDaEQsSUFDQTtZQUNFNUIsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtZQUNsQjtRQUNGO0lBRUo7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25pbHNsL0RvY3VtZW50cy9OaWxzL3Byb2plY3RzL2dhdW50bGV0L3NsYWNrLWNsb25lLXYwL2FwcC9hcGkvbWVzc2FnZXMvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9kYidcblxudHlwZSBBdHRhY2htZW50SW5wdXQgPSB7XG4gIGZpbGVuYW1lOiBzdHJpbmdcbiAgZmlsZVVybDogc3RyaW5nXG4gIGNvbnRlbnRUeXBlOiBzdHJpbmdcbn1cblxuLy8gR2V0IG9yIGNyZWF0ZSBkZWZhdWx0IHVzZXJcbmFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlVXNlcigpIHtcbiAgY29uc3QgZGVmYXVsdFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kRmlyc3QoKVxuICBpZiAoZGVmYXVsdFVzZXIpIHJldHVybiBkZWZhdWx0VXNlclxuXG4gIC8vIENyZWF0ZSBhIGRlZmF1bHQgdXNlciBpZiBub25lIGV4aXN0c1xuICByZXR1cm4gcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogJ3VzZXJfMScsXG4gICAgICBuYW1lOiAnRGVmYXVsdCBVc2VyJyxcbiAgICAgIGF2YXRhcjogJ/CfkaQnLFxuICAgICAgaXNPbmxpbmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfVxuICB9KVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgbWVzc2FnZSByZXF1ZXN0JylcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxuICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0IGJvZHk6JywgSlNPTi5zdHJpbmdpZnkoYm9keSwgbnVsbCwgMikpXG4gICAgY29uc3QgeyBjb250ZW50LCBjaGFubmVsSWQsIHBhcmVudE1lc3NhZ2VJZCwgYXR0YWNobWVudHMgfSA9IGJvZHlcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG5cbiAgICAvLyBHZXQgb3IgY3JlYXRlIHVzZXIgZmlyc3RcbiAgICBjb25zb2xlLmxvZygnR2V0dGluZyBvciBjcmVhdGluZyB1c2VyJylcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0T3JDcmVhdGVVc2VyKClcbiAgICBjb25zb2xlLmxvZygnVXNpbmcgdXNlcjonLCBKU09OLnN0cmluZ2lmeSh1c2VyLCBudWxsLCAyKSlcblxuICAgIC8vIFZhbGlkYXRlIGlucHV0XG4gICAgaWYgKCFjb250ZW50IHx8IHR5cGVvZiBjb250ZW50ICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBjb250ZW50OicsIGNvbnRlbnQpXG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0ludmFsaWQgY29udGVudCcsIGRldGFpbHM6ICdDb250ZW50IG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nJyB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmICghY2hhbm5lbElkIHx8IHR5cGVvZiBjaGFubmVsSWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGNoYW5uZWxJZDonLCBjaGFubmVsSWQpXG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0ludmFsaWQgY2hhbm5lbElkJywgZGV0YWlsczogJ0NoYW5uZWwgSUQgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnIH0pLFxuICAgICAgICB7IHN0YXR1czogNDAwLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1ZhbGlkYXRpbmcgY2hhbm5lbDonLCBjaGFubmVsSWQpXG4gICAgLy8gVmFsaWRhdGUgY2hhbm5lbCBleGlzdHNcbiAgICBjb25zdCBjaGFubmVsID0gYXdhaXQgcHJpc21hLmNoYW5uZWwuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogY2hhbm5lbElkIH0sXG4gICAgfSlcblxuICAgIGlmICghY2hhbm5lbCkge1xuICAgICAgY29uc29sZS5lcnJvcignQ2hhbm5lbCBub3QgZm91bmQ6JywgY2hhbm5lbElkKVxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdDaGFubmVsIG5vdCBmb3VuZCcsIGRldGFpbHM6IGBObyBjaGFubmVsIGZvdW5kIHdpdGggSUQ6ICR7Y2hhbm5lbElkfWAgfSksXG4gICAgICAgIHsgc3RhdHVzOiA0MDQsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBwYXJlbnQgbWVzc2FnZSBpZiBwcm92aWRlZFxuICAgIGlmIChwYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW5nIHBhcmVudCBtZXNzYWdlOicsIHBhcmVudE1lc3NhZ2VJZClcbiAgICAgIGNvbnN0IHBhcmVudE1lc3NhZ2UgPSBhd2FpdCBwcmlzbWEubWVzc2FnZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHBhcmVudE1lc3NhZ2VJZCB9LFxuICAgICAgfSlcblxuICAgICAgaWYgKCFwYXJlbnRNZXNzYWdlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BhcmVudCBtZXNzYWdlIG5vdCBmb3VuZDonLCBwYXJlbnRNZXNzYWdlSWQpXG4gICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdQYXJlbnQgbWVzc2FnZSBub3QgZm91bmQnLCBkZXRhaWxzOiBgTm8gbWVzc2FnZSBmb3VuZCB3aXRoIElEOiAke3BhcmVudE1lc3NhZ2VJZH1gIH0pLFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDQsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH1cbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgdGhlIHJlcGx5IGlzIGluIHRoZSBzYW1lIGNoYW5uZWwgYXMgdGhlIHBhcmVudCBtZXNzYWdlXG4gICAgICBpZiAocGFyZW50TWVzc2FnZS5jaGFubmVsSWQgIT09IGNoYW5uZWxJZCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDaGFubmVsIG1pc21hdGNoOicsIHsgcGFyZW50Q2hhbm5lbElkOiBwYXJlbnRNZXNzYWdlLmNoYW5uZWxJZCwgcmVwbHlDaGFubmVsSWQ6IGNoYW5uZWxJZCB9KVxuICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGNoYW5uZWwnLCBcbiAgICAgICAgICAgIGRldGFpbHM6ICdSZXBseSBtdXN0IGJlIGluIHRoZSBzYW1lIGNoYW5uZWwgYXMgdGhlIHBhcmVudCBtZXNzYWdlJyBcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwLCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbWVzc2FnZScpXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIG1lc3NhZ2UgSURcbiAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IGBtc2dfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpfWBcbiAgICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0ZWQgbWVzc2FnZSBJRDonLCBtZXNzYWdlSWQpXG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgbWVzc2FnZVxuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHByaXNtYS5tZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogbWVzc2FnZUlkLFxuICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgY2hhbm5lbElkLFxuICAgICAgICAgIHBhcmVudE1lc3NhZ2VJZDogcGFyZW50TWVzc2FnZUlkIHx8IG51bGwsXG4gICAgICAgICAgc2VuZGVySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICAgICAgdXBkYXRlZEF0OiBub3csXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgY29uc29sZS5sb2coJ01lc3NhZ2UgY3JlYXRlZDonLCBKU09OLnN0cmluZ2lmeShtZXNzYWdlLCBudWxsLCAyKSlcblxuICAgICAgLy8gQ3JlYXRlIGF0dGFjaG1lbnRzIGlmIGFueVxuICAgICAgaWYgKGF0dGFjaG1lbnRzICYmIGF0dGFjaG1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGF0dGFjaG1lbnRzOicsIGF0dGFjaG1lbnRzLmxlbmd0aClcbiAgICAgICAgYXdhaXQgcHJpc21hLmF0dGFjaG1lbnQuY3JlYXRlTWFueSh7XG4gICAgICAgICAgZGF0YTogYXR0YWNobWVudHMubWFwKChhdHRhY2htZW50OiBBdHRhY2htZW50SW5wdXQpID0+ICh7XG4gICAgICAgICAgICBpZDogYGF0dF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMil9YCwgLy8gR2VuZXJhdGUgYSB1bmlxdWUgSURcbiAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICAgIGZpbGVuYW1lOiBhdHRhY2htZW50LmZpbGVuYW1lLFxuICAgICAgICAgICAgZmlsZVVybDogYXR0YWNobWVudC5maWxlVXJsLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUsXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5vdyxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnNvbGUubG9nKCdBdHRhY2htZW50cyBjcmVhdGVkJylcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIG1lc3NhZ2Ugd2l0aCBhdHRhY2htZW50cycpXG4gICAgICAvLyBSZXR1cm4gdGhlIGNyZWF0ZWQgbWVzc2FnZSB3aXRoIGl0cyBhdHRhY2htZW50cyBhbmQgcGFyZW50IG1lc3NhZ2UgaW5mb1xuICAgICAgY29uc3QgbWVzc2FnZVdpdGhBdHRhY2htZW50cyA9IGF3YWl0IHByaXNtYS5tZXNzYWdlLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogbWVzc2FnZS5pZCB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgYXR0YWNobWVudHM6IHRydWUsXG4gICAgICAgICAgc2VuZGVyOiB0cnVlLFxuICAgICAgICAgIGNoYW5uZWw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBpZiAoIW1lc3NhZ2VXaXRoQXR0YWNobWVudHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggY3JlYXRlZCBtZXNzYWdlIHdpdGggSUQ6ICR7bWVzc2FnZS5pZH1gKVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnUmV0dXJuaW5nIG1lc3NhZ2U6JywgSlNPTi5zdHJpbmdpZnkobWVzc2FnZVdpdGhBdHRhY2htZW50cywgbnVsbCwgMikpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obWVzc2FnZVdpdGhBdHRhY2htZW50cylcbiAgICB9IGNhdGNoIChkYkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBlcnJvcjonLCBkYkVycm9yKVxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgICAgZXJyb3I6ICdEYXRhYmFzZSBlcnJvcicsIFxuICAgICAgICAgIGRldGFpbHM6IGRiRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGRiRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGRhdGFiYXNlIGVycm9yJyxcbiAgICAgICAgICBzdGFjazogZGJFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZGJFcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgICAgICB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCwgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0gfVxuICAgICAgKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBMb2cgdGhlIGZ1bGwgZXJyb3IgZGV0YWlsc1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbWVzc2FnZS4gRnVsbCBlcnJvcjonLCB7XG4gICAgICBlcnJvcixcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgc3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgIH0pXG4gICAgXG4gICAgLy8gUmV0dXJuIGEgbW9yZSBkZXRhaWxlZCBlcnJvciBtZXNzYWdlXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGNyZWF0ZSBtZXNzYWdlJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICAgIH0pLFxuICAgICAgeyBcbiAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsImdldE9yQ3JlYXRlVXNlciIsImRlZmF1bHRVc2VyIiwidXNlciIsImZpbmRGaXJzdCIsImNyZWF0ZSIsImRhdGEiLCJpZCIsIm5hbWUiLCJhdmF0YXIiLCJpc09ubGluZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJQT1NUIiwicmVxIiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnRlbnQiLCJjaGFubmVsSWQiLCJwYXJlbnRNZXNzYWdlSWQiLCJhdHRhY2htZW50cyIsIm5vdyIsImVycm9yIiwiZGV0YWlscyIsInN0YXR1cyIsImhlYWRlcnMiLCJjaGFubmVsIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwicGFyZW50TWVzc2FnZSIsIm1lc3NhZ2UiLCJwYXJlbnRDaGFubmVsSWQiLCJyZXBseUNoYW5uZWxJZCIsIm1lc3NhZ2VJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInNsaWNlIiwic2VuZGVySWQiLCJsZW5ndGgiLCJhdHRhY2htZW50IiwiY3JlYXRlTWFueSIsIm1hcCIsImZpbGVuYW1lIiwiZmlsZVVybCIsImNvbnRlbnRUeXBlIiwibWVzc2FnZVdpdGhBdHRhY2htZW50cyIsImluY2x1ZGUiLCJzZW5kZXIiLCJFcnJvciIsImRiRXJyb3IiLCJzdGFjayIsInVuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/messages/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ]\n});\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBRTdDLE1BQU1DLGtCQUFrQkM7QUFFakIsTUFBTUMsU0FDWEYsZ0JBQWdCRSxNQUFNLElBQ3RCLElBQUlILHdEQUFZQSxDQUFDO0lBQ2ZJLEtBQUs7UUFBQztLQUFRO0FBQ2hCLEdBQUU7QUFFSixJQUFJQyxJQUFxQyxFQUFFSixnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaWxzbC9Eb2N1bWVudHMvTmlscy9wcm9qZWN0cy9nYXVudGxldC9zbGFjay1jbG9uZS12MC9saWIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCJcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPVxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hIHx8XG4gIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzogW1wicXVlcnlcIl0sXG4gIH0pXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWEiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmessages%2Froute&page=%2Fapi%2Fmessages%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2Froute.ts&appDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fnilsl%2FDocuments%2FNils%2Fprojects%2Fgauntlet%2Fslack-clone-v0&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();